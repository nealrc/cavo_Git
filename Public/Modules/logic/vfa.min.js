var tipsoption={width:350,sticky:false,cursor:"pointer",closePosition:"title",closeText:"&nbsp;"};
$(document).ready(function(){$("#vfa").submit(function(){$(this).ajaxSubmit({dataType:"json",beforeSubmit:function(){$("#resultwrapper").show();$("#results").empty().css("height","200px").block({message:"<h2 style='margin:auto auto;'>Analyzing ... <img src='../../../Assets/images/loader-bigcircle.gif' /></h2>",css:{padding:0,margin:"0 auto",border:"none"},overlayCSS:{background:"none"}});return true},success:function(a){var d="";if(100==a){d+="<h1>Empty input detected!</h1>";$("#results").addClass("error")}else{d+=
undefined!=a.status?a.status:a;if(undefined!=a.data){var dict =$('input:radio[name=dict]:checked').val(),f="",g=a.max-1;if(a.trimmed==1){b=$("#contents").val().substr(0,a.alen);b+="<br />... (article trimmed)"}else b=$("#contents").val();b=b.replace(/\n/g,"<br />");f+='<div id="kytags">';$.each(a.data,function(e,c){dsize=100+(c.freq-1)*2/g*100+1;f+='<div class="wordwrapper"><a class="tooltip-target" rel="vfass.php?dict='+dict+'&l='+c.ids+'" title="'+c.voc+'"><span style="font-size:'+dsize+'%">'+c.voc+'</span><span style="font-size:80%">'+c.freq+"</span></a></div>"});
f+="</div>";a=a.data;a.sort(sort_by("len",true,parseInt));$.each(a,function(e,c){b=strReplaceAll(b,c.voc,"%rep"+e+"%")});$.each(a,function(e,c){b=strReplaceAll(b,"%rep"+e+"%",'<a class="tooltip-target" rel="vfass.php?dict='+dict+'&l='+c.ids+'" title="'+c.voc+'">'+c.voc+'<span class="llid">'+c.freq+"</span></a>")});d+='<div id="parsestring">'+b+"</div>"+f}$("#results").removeClass("error").addClass("success")}$("#results").append(d).css("height","auto").unblock();$("a.tooltip-target").cluetip(tipsoption)}});return false})});
function strReplaceAll(a,d,f){return a.replace(RegExp(d,"gi"),f)}var sort_by=function(a,d,f){d=d?-1:1;return function(g,e){g=g[a];e=e[a];if(typeof f!="undefined"){g=f(g);e=f(e)}if(g<e)return d*-1;if(g>e)return d*1;return 0}};