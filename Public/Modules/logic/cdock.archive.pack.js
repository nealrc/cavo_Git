var CurrentRowId,CurrentRowObj,CurrentRecID,blockoption={message:'<img src="../../../Assets/images/loader-bigcircle.gif" alt="loading...">',css:{background:"none",border:"none",padding:0},overlayCSS:{opacity:0},baseZ:2E3};
$(document).ready(function(){$("#scoretable").jqGrid({url:"calls/getscore.php",datatype:"json",width:700,height:350,colNames:["ID","Date","Test","Duration (h:m:s)","Score"],colModel:[{name:"id",index:"id",width:40,search:true,searchoptions:{sopt:["eq","gt","lt","ge","le"]}},{name:"date",index:"date",width:50,search:true,searchoptions:{sopt:["eq","gt","lt","ge","le"]}},{name:"test",index:"test",width:100,search:true,stype:"select",searchoptions:{sopt:["eq"],dataUrl:"calls/gettesttype.php"}},{name:"time",
index:"time",width:50,search:true,searchoptions:{sopt:["eq","gt","lt","ge","le"]}},{name:"score",index:"score",width:30,search:true,searchoptions:{sopt:["eq","gt","lt","ge","le"]}}],rowNum:20,rowList:[20,50],sortname:"date",pager:"#navpager",viewrecords:true,sortorder:"desc",caption:"Your test history...",loadComplete:function(a){100==parseInt(a,10)&&info_dialog("error","No records found!","OK","../../../Assets/js/jquery.ui/css/flickr/images/")}});$("#scoretable").jqGrid("navGrid","#navpager",{edit:false,
add:false,del:false},{},{},{},{multipleSearch:true,odata:["=","&ne;","&lt;","&le;","&gt;","&ge;"]},{});$("#scoretable").jqGrid("navButtonAdd","#navpager",{caption:"",position:"last",buttonicon:"ui-icon-info",position:"last",title:"View record information",onClickButton:function(){CurrentRowId=$("#scoretable").getGridParam("selrow");undefined!=CurrentRowId?loadrecord(CurrentRowId):info_dialog("Error!","Please select a record","OK","../../../Assets/js/jquery.ui/css/south-street/images/")}});$(".navbuttonwrapper").find("a").each(function(){$(this).hover(function(){$(this).removeClass("ui-state-default").addClass("ui-state-hover")},
function(){$(this).removeClass("ui-state-hover").addClass("ui-state-default")})});$("#btnpre").click(function(){CurrentRowId=$("#scoretable").getGridParam("selrow");var a=getCurrPos("#scoretable",CurrentRowId);a[0]=parseInt(a[0],10);if(a[0]!=-1&&a[1][a[0]-1]){CurrentRowId=a[1][a[0]-1];loadrecord(CurrentRowId);$("#scoretable").setSelection(CurrentRowId);updateNav(a[0]-1,a[1].length-1)}});$("#btnnext").click(function(){CurrentRowId=$("#scoretable").getGridParam("selrow");var a=getCurrPos("#scoretable",
CurrentRowId);a[0]=parseInt(a[0],10);if(a[0]!=-1&&a[1][a[0]+1]){CurrentRowId=a[1][a[0]+1];loadrecord(CurrentRowId);$("#scoretable").setSelection(CurrentRowId);updateNav(a[0]+1,a[1].length-1)}})});
function loadrecord(a){var b="";$("#bodywrapper").empty().block(blockoption);$.getJSON("calls/getsinglerecord.php",{id:a},function(c){if("undefined"==typeof c.msg){b+="<h2>"+c.t+" ( "+c.m+" questions missed )</h2>";if(parseInt(c.m)>0){b+="<h2>List of questions you missed</h2>";b+='<table class="ui-widget" cellpadding="0" cellspacing="0">';b+='<thead class="ui-widget-header">';b+='<tr><th>Question</th><th>Correct Answer</th><th>Vocabulary Selected</th><th>Selected Answer</th></tr></thead><tbody class="ui-widget-content">';
$.each(c.wrong,function(e,d){b+="<tr><td>"+d.q+"</td><td>"+d.a+"</td><td>"+d.u+"</td><td>"+d.d+"</td></tr>"});b+="</tbody></table>"}if(parseInt(c.c)>0){b+='<h2>List of questions you did correct</h2><table class="ui-widget" cellpadding="0" cellspacing="0"><thead class="ui-widget-header"><tr><th>Question</th><th>Correct Answer</th></tr></thead><tbody class="ui-widget-content">';$.each(c.right,function(e,d){b+="<tr><td>"+d.q+"</td><td>"+d.a+"</td></tr>"});b+="</tbody></table>"}}else $.each(c.msg,
function(e,d){b+=d.note+"<br />"});$("#bodywrapper").append(b).unblock()});loaddialog("#singlerecordinfo","Detailed test information for record id."+a)}function getCurrPos(a,b){var c=$(a).getDataIDs();return[$.inArray(b,c),c]}function updateNav(a,b){a==0?$("a#pre").addClass("ui-state-disabled"):$("a#pre").removeClass("ui-state-disabled");a==b?$("a#next").addClass("ui-state-disabled"):$("a#next").removeClass("ui-state-disabled")}
function loaddialog(a,b){$(a).dialog({bgiframe:true,resizable:true,width:750,height:700,title:"Status",modal:true});$(a).dialog("option","title",b).dialog("open")};