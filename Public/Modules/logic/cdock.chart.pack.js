$(document).ready(function(){$("#chartwrapper").empty().block({message:'<img src="../../../Assets/images/loader-bigcircle.gif" alt="loading...">',css:{background:"none",border:"none",padding:100},overlayCSS:{background:"#fff"}});$.getJSON("calls/getchartdata.php",function(d){if(d==100)$("#chartwrapper").append("<h2>No test data found</h2><p>Please try again after you have taken the test(s).</p>");else{var i=[],e=[],f=[],g=[],h=[];$.each(d,function(c,d){i[c]=d.test;e[c]="chbody"+(c+1);f[c]=[];g[c]= [];h[c]=[];$.each(d.data,function(a,b){f[c].push(parseFloat(b.score));g[c].push(parseFloat(b.time));h[c].push(b.mdate)});$("#chartwrapper").append("<div style='width:700px; height:300px;margin:0 auto' id='"+e[c]+"'></div>");new Highcharts.Chart({chart:{renderTo:e[c],alignTicks:false,margin:[100,100,50,120]},title:{text:i[c],style:{margin:"10px 0 0 0"}},xAxis:[{categories:h[c],labels:{rotation:-15,align:"right",style:{font:"normal 10px Verdana, sans-serif",color:"#666"},formatter:function(){var a=this.value.split("/"); return a[0]+"/"+a[1]+"/"+a[2]}}}],yAxis:[{max:800,title:{text:"Score",margin:60,style:{color:"#89A54E"}},labels:{style:{color:"#89A54E"}}},{min:0,title:{text:"Duration (m:s)",margin:70,style:{color:"#4572A7"}},gridLineWidth:0,opposite:!0,labels:{style:{color:"#4572A7"},formatter:function(){var a=this.value,b=parseInt(a/60);b>0?(a=parseInt(a%60),b=b<10?"0"+b:b):b="00";return b+":"+(a<10?"0"+a:a)}}}],tooltip:{formatter:function(){var a;if(this.series.name=="Duration"){a=this.y;var b=parseInt(a/60); b>0?(a%=60,b=b<10?"0"+b:b):b="00";a=b+":"+(a<10?"0"+a:a)+" (m:s)"}else a=this.y;return"<b>"+this.series.name+":</b> "+a+"<br/>"+this.x}},legend:{layout:"horizontal",style:{left:"auto",bottom:"auto",right:"100px",top:"45px"},backgroundColor:"#FFFFFF"},series:[{name:"Score",color:"#89A54E",type:"spline",yAxis:0,data:f[c]},{name:"Duration",color:"#4572A7",type:"spline",yAxis:1,data:g[c]}],credits:{enabled:!1},point:{click:function(){alert(this.e.xAxis[0]+" "+this.e.yAxis[0])}}})})}});$("#chartwrapper").unblock()});