(function(e){var p=e.event,q;p.special.smartresize={setup:function(){e(this).bind("resize",p.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",p.special.smartresize.handler)},handler:function(k,l){var n=this,m=arguments;k.type="smartresize";q&&clearTimeout(q);q=setTimeout(function(){jQuery.event.handle.apply(n,m)},l==="execAsap"?0:100)}};e.fn.smartresize=function(k){return k?this.bind("smartresize",k):this.trigger("smartresize",["execAsap"])};e.fn.masonry=function(k,l){function n(c,
b){c.$bricks=b.itemSelector==undefined?b.$brickParent.children():b.$brickParent.find(b.itemSelector)}function m(c,b,a,d,g,f){var h=0;for(i=0;i<b;i++)if(a[i]<a[h])h=i;b={left:g.colW*h+g.posLeft,top:a[h]};g.masoned&&f.animate?c.animate(b,{duration:f.animationOptions.duration,easing:f.animationOptions.easing,complete:f.animationOptions.complete,step:f.animationOptions.step,queue:f.animationOptions.queue,specialEasing:f.animationOptions.specialEasing}):c.css(b);for(i=0;i<d;i++)g.colY[h+i]=a[h]+c.outerHeight(true)}
function r(c,b,a){n(a,b);a.colW=b.columnWidth==undefined?a.masoned?c.data("masonry").colW:a.$bricks.outerWidth(true):b.columnWidth;a.colCount=Math.floor(c.width()/a.colW);a.colCount=Math.max(a.colCount,1)}function s(c,b,a){a.masoned||c.css("position","relative");if(!a.masoned||b.appendedContent!=undefined)a.$bricks.css("position","absolute");var d=e("<div />");c.prepend(d);a.posTop=Math.round(d.position().top);a.posLeft=Math.round(d.position().left);d.remove();if(a.masoned&&b.appendedContent!=undefined){a.colY=
c.data("masonry").colY;i=c.data("masonry").colCount}else{a.colY=[];i=0}for(;i<a.colCount;i++)a.colY[i]=a.posTop;b.singleMode?a.$bricks.each(function(){var g=e(this);m(g,a.colCount,a.colY,1,a,b)}):a.$bricks.each(function(){var g=e(this),f=Math.ceil(g.outerWidth(true)/a.colW);f=Math.min(f,a.colCount);if(f==1)m(g,a.colCount,a.colY,1,a,b);else{var h=a.colCount+1-f,o=[0];for(i=0;i<h;i++)for(j=o[i]=0;j<f;j++)o[i]=Math.max(o[i],a.colY[i+j]);m(g,h,o,f,a,b)}});for(i=a.wallH=0;i<a.colCount;i++)a.wallH=Math.max(a.wallH,
a.colY[i]);d={height:a.wallH-a.posTop};a.masoned&&b.animate?c.animate(d,{duration:b.animationOptions.duration,easing:b.animationOptions.easing,complete:b.animationOptions.complete,step:b.animationOptions.step,queue:b.animationOptions.queue,specialEasing:b.animationOptions.specialEasing}):c.css(d);a.masoned||c.addClass("masoned");l.call(a.$bricks);c.data("masonry",a)}return this.each(function(){var c=e(this),b=e.extend({},e.masonry);b.masoned=c.data("masonry")!=undefined;var a=b.masoned?c.data("masonry").options:
{},d=e.extend({},b.defaults,a,k);b.options=d.saveOptions?d:a;l=l||function(){};d.$brickParent=b.masoned&&d.appendedContent!=undefined?d.appendedContent:c;n(b,d);if(b.$bricks.length){r(c,d,b);s(c,d,b);a=a.resizeable;!a&&d.resizeable&&e(window).bind("smartresize.masonry",function(){b.masoned=c.data("masonry")!=undefined;var g=c.data("masonry").colCount;r(c,d,b);b.colCount!=g&&s(c,d,b)});a&&!d.resizeable&&e(window).unbind("smartresize.masonry")}else return this})};e.masonry={defaults:{singleMode:false,
columnWidth:undefined,itemSelector:undefined,appendedContent:undefined,saveOptions:true,resizeable:true,animate:false,animationOptions:{}},colW:undefined,colCount:undefined,colY:undefined,wallH:undefined,masoned:undefined,posTop:0,posLeft:0,options:undefined,$bricks:undefined,$brickParent:undefined}})(jQuery);